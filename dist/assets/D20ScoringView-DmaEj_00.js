import{_ as f,r as S,c as d,b as e,w as b,d as h,v as y,F as u,e as m,t as c,f as w,g as k,h as N,o as i,i as x,j as J}from"./index-C1tfiSwU.js";const C={data(){return{records_list:[],record_detail:{record_id:"",record_name:"",players:[],stats:[]},ip_player:"",playerSelect:"",hidePlayer:!0,record_imp:""}},mounted(){let r=JSON.parse(localStorage.getItem("records_list"));r!=null&&(this.records_list=r)},methods:{createRecord(){this.record_detail.record_id=this.createRandomString(8),this.record_detail.players=[],this.record_detail.stats=[],this.records_list.push({record_id:this.record_detail.record_id,record_name:this.record_detail.record_name}),localStorage.setItem("records_list",JSON.stringify(this.records_list)),localStorage.setItem(`record_detail_${this.record_detail.record_id}`,JSON.stringify(this.record_detail))},importRecord(){try{let r=JSON.parse(this.record_imp);r.record_id=this.createRandomString(8),this.records_list.push({record_id:r.record_id,record_name:r.record_name}),localStorage.setItem("records_list",JSON.stringify(this.records_list)),localStorage.setItem(`record_detail_${r.record_id}`,JSON.stringify(r)),this.record_imp=""}catch{this.record_imp=""}},load_data(r){let t=JSON.parse(localStorage.getItem(`record_detail_${r}`));if(t!=null)this.record_detail=t;else{const n=this.records_list.findIndex(_=>_.record_id==r);this.records_list.splice(n,1),localStorage.setItem("records_list",JSON.stringify(this.records_list))}},createPlayer(){this.record_detail.players.includes(this.ip_player)||(this.record_detail.players.push(this.ip_player),this.ip_player="",localStorage.setItem(`record_detail_${this.record_detail.record_id}`,JSON.stringify(this.record_detail)))},deletePlayer(r){const t=this.record_detail.players.findIndex(n=>n==r);this.record_detail.players.splice(t,1),localStorage.setItem(`record_detail_${this.record_detail.record_id}`,JSON.stringify(this.record_detail))},addScore(r){this.playerSelect!=""&&(this.record_detail.stats.push({player:this.playerSelect,score:r}),localStorage.setItem(`record_detail_${this.record_detail.record_id}`,JSON.stringify(this.record_detail)))},deleteScore(r){this.record_detail.stats.splice(r,1),localStorage.setItem(`record_detail_${this.record_detail.record_id}`,JSON.stringify(this.record_detail))},copyJson(){navigator.clipboard.writeText(JSON.stringify(this.record_detail))},back(){this.record_detail={record_id:"",record_name:"",players:[],stats:[]}},createRandomString(r){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";const _=new Uint8Array(r);return crypto.getRandomValues(_),_.forEach(o=>{n+=t[o%t.length]}),n}}},I={key:0,class:"row justify-content-center mb-3"},R={class:"col-md-8"},O={class:"card"},P={class:"card-body"},V=e("h5",{class:"card-title"},"Records",-1),A={class:"mb-3"},D=e("label",{class:"form-label"},"Record Name",-1),U={class:"input-group mb-2"},j=e("button",{class:"btn btn-success",type:"submit"},"Add",-1),B={class:"mb-3"},q=e("label",{class:"form-label"},"Json Import",-1),M={class:"input-group mb-2"},T=e("button",{class:"btn btn-success",type:"submit"},"Add",-1),E={class:"table table-light"},F=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{width:"1"},"#"),e("th",null,"Name"),e("th",{width:"1"},"Go")])],-1),z={class:"d-grid gap-2"},G=["onClick"],H=e("i",{class:"fa fa-arrow-right","aria-hidden":"true"},null,-1),L=[H],K={key:1,class:"row justify-content-center g-3 mb-3"},Q={class:"col-md-4"},W={class:"card"},X={class:"card-header"},Y=e("h5",{class:"card-title me-auto"},"Records",-1),Z={class:"d-inline"},$={class:"card-body"},ee={class:"d-grid mb-2"},te={class:"mb-3"},se=e("label",{class:"form-label"},"Add Player Name",-1),re={class:"input-group mb-2"},oe=e("button",{class:"btn btn-success",type:"submit"},"Add",-1),le={class:"table table-light"},de=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{width:"1",class:"text-center"},"#"),e("th",null,"Name"),e("th",{width:"1",class:"text-center"},"Remove")])],-1),ie=["onClick"],ce=e("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1),ae=[ce],ne={class:"col-md-8"},_e={class:"card"},he={class:"card-header"},ue=e("div",{class:"me-auto"},"Dice Stat",-1),me={class:"card-body"},pe={class:"mb-3"},be=e("label",{class:"form-label"},"Select Player",-1),ye={class:"form-selectgroup"},ge=["value"],ve={class:"form-selectgroup-label"},fe={class:"mb-3"},Se={class:"row row-cols-5 g-3"},we=["onClick"],ke={class:"table table-light"},Ne=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{width:"1",class:"text-center"},"#"),e("th",null,"name"),e("th",{width:"2"},"Score"),e("th",{width:"1",class:"text-center"},"ลบ")])],-1),xe={class:"text-end"},Je=["onClick"],Ce=e("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1),Ie=[Ce];function Re(r,t,n,_,o,a){var g;const v=S("download-csv");return(g=o.record_detail)!=null&&g.record_id?(i(),d("div",K,[e("div",Q,[e("div",W,[e("div",X,[Y,e("div",Z,[e("button",{class:"btn btn-warning me-2",onClick:t[4]||(t[4]=s=>a.back()),type:"button"}," Back "),e("button",{class:"btn btn-info",onClick:t[5]||(t[5]=s=>o.hidePlayer=!o.hidePlayer),type:"button"},c(o.hidePlayer?"Show":"Hide"),1)])]),h(e("div",$,[e("div",ee,[e("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=s=>a.copyJson()),type:"button"}," Json Copy ")]),e("form",{onSubmit:t[8]||(t[8]=b(s=>a.createPlayer(),["prevent"]))},[e("div",te,[se,e("div",re,[h(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>o.ip_player=s),class:"form-control",placeholder:"Player Name",required:""},null,512),[[y,o.ip_player]]),oe])])],32),e("table",le,[de,e("tbody",null,[(i(!0),d(u,null,m(o.record_detail.players,(s,l)=>(i(),d("tr",{key:l},[e("td",null,c(l+1),1),e("td",null,c(s),1),e("td",null,[e("button",{type:"button",onClick:p=>a.deletePlayer(s),class:"btn btn-danger"},ae,8,ie)])]))),128))])])],512),[[w,!o.hidePlayer]])])]),e("div",ne,[e("div",_e,[e("div",he,[ue,k(v,{data:o.record_detail.stats,class:"btn justify-end"},{default:N(()=>[x(" Download CSV ")]),_:1},8,["data"])]),e("div",me,[e("div",pe,[be,e("div",ye,[(i(!0),d(u,null,m(o.record_detail.players,(s,l)=>(i(),d("label",{class:"form-selectgroup-item",key:l},[h(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=p=>o.playerSelect=p),value:s,class:"form-selectgroup-input"},null,8,ge),[[J,o.playerSelect]]),e("span",ve,c(s),1)]))),128))])]),e("div",fe,[e("div",Se,[(i(),d(u,null,m(20,s=>e("div",{class:"col text-center",key:s},[e("button",{class:"btn bd",onClick:l=>a.addScore(s)},c(s),9,we)])),64))])]),e("table",ke,[Ne,e("tbody",null,[(i(!0),d(u,null,m(o.record_detail.stats,(s,l)=>(i(),d("tr",{key:l},[e("td",null,c(l+1),1),e("td",null,c(s.player),1),e("td",xe,c(s.score),1),e("td",null,[e("button",{type:"button",onClick:p=>a.deleteScore(l),class:"btn btn-danger"},Ie,8,Je)])]))),128))])])])])])])):(i(),d("div",I,[e("div",R,[e("div",O,[e("div",P,[V,e("form",{onSubmit:t[1]||(t[1]=b(s=>a.createRecord(),["prevent"]))},[e("div",A,[D,e("div",U,[h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.record_detail.record_name=s),class:"form-control",placeholder:"Record Name",required:""},null,512),[[y,o.record_detail.record_name]]),j])])],32),e("form",{onSubmit:t[3]||(t[3]=b(s=>a.importRecord(),["prevent"]))},[e("div",B,[q,e("div",M,[h(e("textarea",{rows:"5",style:{resize:"none"},"onUpdate:modelValue":t[2]||(t[2]=s=>o.record_imp=s),class:"form-control",placeholder:"Json Import",required:""},null,512),[[y,o.record_imp]]),T])])],32),e("table",E,[F,e("tbody",null,[(i(!0),d(u,null,m(o.records_list,(s,l)=>(i(),d("tr",{key:s.record_id},[e("td",null,c(l+1),1),e("td",null,c(s.record_name),1),e("td",null,[e("div",z,[e("button",{type:"button",onClick:p=>a.load_data(s.record_id),class:"btn btn-primary"},L,8,G)])])]))),128))])])])])])]))}const Pe=f(C,[["render",Re]]);export{Pe as default};
